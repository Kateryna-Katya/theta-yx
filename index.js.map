{"version":3,"file":"index.js","sources":["../src/main.js"],"sourcesContent":["document.addEventListener('DOMContentLoaded', () => {\n\n    /* ================================================================\n       1. ИНИЦИАЛИЗАЦИЯ БИБЛИОТЕК (С ЗАЩИТОЙ ОТ ОШИБОК)\n       ================================================================ */\n    \n    // --- ICONS ---\n    if (typeof lucide !== 'undefined') {\n        lucide.createIcons();\n    }\n\n    // --- SMOOTH SCROLL (LENIS) ---\n    let lenis;\n    if (typeof Lenis !== 'undefined') {\n        lenis = new Lenis({\n            duration: 1.2,\n            easing: (t) => Math.min(1, 1.001 - Math.pow(2, -10 * t)),\n            smooth: true,\n        });\n\n        function raf(time) {\n            lenis.raf(time);\n            requestAnimationFrame(raf);\n        }\n        requestAnimationFrame(raf);\n    } else {\n        console.warn('Lenis не загружен. Используется стандартный скролл.');\n        document.documentElement.style.scrollBehavior = 'smooth';\n    }\n\n    // --- GSAP SETUP ---\n    if (typeof gsap !== 'undefined' && typeof ScrollTrigger !== 'undefined') {\n        gsap.registerPlugin(ScrollTrigger);\n    }\n\n    /* ================================================================\n       2. МОБИЛЬНОЕ МЕНЮ\n       ================================================================ */\n    const burger = document.querySelector('.header__burger');\n    const nav = document.querySelector('.header__nav');\n    const links = document.querySelectorAll('.header__link, .header__actions .btn');\n\n    function toggleMenu() {\n        if (!nav) return;\n        const isActive = nav.classList.toggle('is-active');\n        \n        // Блокируем скролл страницы, когда меню открыто\n        document.body.style.overflow = isActive ? 'hidden' : '';\n    }\n\n    if (burger) {\n        burger.addEventListener('click', toggleMenu);\n    }\n\n    // Закрываем меню при клике на любую ссылку\n    links.forEach(link => {\n        link.addEventListener('click', () => {\n            if (nav && nav.classList.contains('is-active')) {\n                toggleMenu();\n            }\n        });\n    });\n\n    /* ================================================================\n       3. FAQ АККОРДЕОН\n       ================================================================ */\n    const faqItems = document.querySelectorAll('.faq__item');\n\n    faqItems.forEach(item => {\n        const question = item.querySelector('.faq__question');\n        const answer = item.querySelector('.faq__answer');\n\n        if (question && answer) {\n            question.addEventListener('click', () => {\n                // Если хотим, чтобы открывался только один за раз — раскомментируй строки ниже:\n                /*\n                faqItems.forEach(otherItem => {\n                    if (otherItem !== item && otherItem.classList.contains('active')) {\n                        otherItem.classList.remove('active');\n                        otherItem.querySelector('.faq__answer').style.maxHeight = null;\n                    }\n                });\n                */\n\n                const isActive = item.classList.toggle('active');\n\n                if (isActive) {\n                    answer.style.maxHeight = answer.scrollHeight + \"px\";\n                } else {\n                    answer.style.maxHeight = null;\n                }\n            });\n        }\n    });\n\n    /* ================================================================\n       4. ФОРМА КОНТАКТОВ (ВАЛИДАЦИЯ + КАПЧА)\n       ================================================================ */\n    const form = document.getElementById('leadForm');\n    \n    if (form) {\n        const phoneInput = document.getElementById('phoneInput');\n        const captchaQ = document.getElementById('captchaQuestion');\n        const captchaInput = document.getElementById('captchaInput');\n        const msgBox = document.getElementById('formMessage');\n\n        // Валидация телефона (удаляем буквы)\n        if (phoneInput) {\n            phoneInput.addEventListener('input', (e) => {\n                e.target.value = e.target.value.replace(/[^0-9+\\s-]/g, '');\n            });\n        }\n\n        // Генерация математической капчи\n        let num1 = Math.floor(Math.random() * 10);\n        let num2 = Math.floor(Math.random() * 10);\n        if (captchaQ) captchaQ.textContent = `${num1} + ${num2} = ?`;\n\n        // Обработка отправки\n        form.addEventListener('submit', (e) => {\n            e.preventDefault();\n            \n            if (!msgBox || !captchaInput) return;\n\n            msgBox.style.display = 'none';\n            msgBox.className = 'form-message';\n\n            // 1. Проверка капчи\n            if (parseInt(captchaInput.value) !== (num1 + num2)) {\n                msgBox.textContent = \"Ошибка: Неверный ответ на пример.\";\n                msgBox.classList.add('error');\n                msgBox.style.display = 'block';\n                return;\n            }\n\n            // 2. Имитация AJAX отправки\n            const btn = form.querySelector('button[type=\"submit\"]');\n            const originalText = btn.textContent;\n            \n            btn.textContent = \"Отправка...\";\n            btn.disabled = true;\n\n            setTimeout(() => {\n                // Успех\n                btn.textContent = originalText;\n                btn.disabled = false;\n                form.reset();\n                \n                // Генерируем новый пример\n                num1 = Math.floor(Math.random() * 10);\n                num2 = Math.floor(Math.random() * 10);\n                if (captchaQ) captchaQ.textContent = `${num1} + ${num2} = ?`;\n\n                msgBox.textContent = \"Спасибо! Данные успешно отправлены. Мы свяжемся с вами.\";\n                msgBox.classList.add('success');\n                msgBox.style.display = 'block';\n                \n                // Сохраняем флаг отправки\n                localStorage.setItem('lead_sent', 'true');\n            }, 1500);\n        });\n    }\n\n    /* ================================================================\n       5. АНИМАЦИИ (GSAP)\n       ================================================================ */\n    if (typeof gsap !== 'undefined') {\n        \n        // Hero Анимация (Timeline)\n        const heroTl = gsap.timeline();\n        \n        // Проверяем наличие элементов перед анимацией\n        if (document.querySelector('.hero__title')) {\n            heroTl.from('.hero__label', { y: 20, opacity: 0, duration: 0.8, delay: 0.2 })\n                  .from('.hero__title', { y: 50, opacity: 0, duration: 1, ease: \"power3.out\" }, \"-=0.4\")\n                  .to('.hero__subtitle', { opacity: 1, duration: 1 }, \"-=0.6\")\n                  .from('.hero__actions', { scale: 0.9, opacity: 0, duration: 0.5 }, \"-=0.4\");\n        }\n\n        // ScrollTrigger для всех секций\n        const sections = document.querySelectorAll('section:not(.hero)');\n        sections.forEach(section => {\n            gsap.from(section.children, {\n                scrollTrigger: {\n                    trigger: section,\n                    start: \"top 80%\", // Начинать анимацию, когда верх секции достигает 80% экрана\n                    toggleActions: \"play none none reverse\"\n                },\n                y: 50,\n                opacity: 0,\n                duration: 0.8,\n                stagger: 0.1 // Задержка между появлением дочерних элементов\n            });\n        });\n    }\n\n    /* ================================================================\n       6. COOKIE POPUP\n       ================================================================ */\n    if (!localStorage.getItem('cookiesAccepted')) {\n        const cookieDiv = document.createElement('div');\n        cookieDiv.style.cssText = `\n            position: fixed; bottom: 20px; right: 20px; \n            background: #141A29; border: 1px solid rgba(255,255,255,0.1); \n            padding: 20px; max-width: 300px; z-index: 999; \n            border-radius: 12px; box-shadow: 0 10px 30px rgba(0,0,0,0.5);\n            display: flex; flex-direction: column; gap: 10px;\n        `;\n        \n        cookieDiv.innerHTML = `\n            <p style=\"font-size: 13px; color: #94A3B8; margin: 0;\">Этот сайт использует cookies для улучшения работы.</p>\n            <button id=\"acceptCookies\" style=\"\n                background: #6366F1; color: white; border: none; \n                padding: 8px 16px; border-radius: 6px; cursor: pointer; \n                font-size: 12px; align-self: flex-start; font-weight: 600;\n            \">Принять</button>\n        `;\n        document.body.appendChild(cookieDiv);\n\n        const acceptBtn = document.getElementById('acceptCookies');\n        if (acceptBtn) {\n            acceptBtn.addEventListener('click', () => {\n                localStorage.setItem('cookiesAccepted', 'true');\n                cookieDiv.style.opacity = '0';\n                setTimeout(() => cookieDiv.remove(), 300);\n            });\n        }\n    }\n});"],"names":["lenis","raf","time","t","burger","nav","links","toggleMenu","isActive","link","item","question","answer","form","phoneInput","captchaQ","captchaInput","msgBox","e","num1","num2","btn","originalText","heroTl","section","cookieDiv","acceptBtn"],"mappings":"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"}